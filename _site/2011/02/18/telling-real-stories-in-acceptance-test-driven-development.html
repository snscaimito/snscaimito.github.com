<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Telling real stories in Acceptance Test Driven Development</title>
	
	<link rel="canonical" href="http://0.0.0.0:4000/2011/02/18/telling-real-stories-in-acceptance-test-driven-development.html"/>
	
	<link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<link rel="stylesheet" href="/css/schwab.css" type="text/css" />
	<link rel="stylesheet" href="/css/print.css" media="print" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed|Sansita:700|Zilla+Slab" rel="stylesheet">
	
	<link rel="alternate" type="application/rss+xml" title="Stephan Schwab" href="/rss.xml"/>

	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
	<script type='text/javascript' src='/unitegallery/js/unitegallery.min.js'></script> 
		
	<link rel='stylesheet' href='/unitegallery/css/unite-gallery.css' type='text/css' /> 
	<script type='text/javascript' src='/unitegallery/themes/tiles/ug-theme-tiles.js'></script> 

	<meta property="og:title" content="Telling real stories in Acceptance Test Driven Development">
	<meta property="twitter:title" content="Telling real stories in Acceptance Test Driven Development">
	<meta property="og:description" content="">
	<meta property="twitter:description" content="">
	<meta property="og:type" content="article">
	<meta property="og:url" content="http://0.0.0.0:4000/2011/02/18/telling-real-stories-in-acceptance-test-driven-development.html">
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:site" content="@snscaimito">
	
</head>


<body>
	<div class="container">
		<div class="header no-print">
  <div class="menu">
    <a href="/">Home</a>
    <a href="/category/software_development.html">Software</a>
    <a href="/category/farm-life.html">Farm Life</a>
    <a href="/category/Business.html">Business</a>
    <a href="/category/aviation.html">Aviation</a>
  </div>
  <div class="claim-box">
    <p class="claim">Tales about Aviation, Coaching, Farming, Software Development</p>
  </div>
</div>
		<div class="row">
			<div class="span9">
				<div class="post">
					<h1>Telling real stories in Acceptance Test Driven Development</h1>
          <p>Recently I was able to influence the way user stories and Cucumber features are written at one of my clients. They are not yet a fully agile organization. People in many different departments produce a large number of documents that range from verbal descriptions of expected behavior to very detailed “blueprints” for the user interface. These documents go from a very high level (kind of “here is what we want”) over several layers down to a very detailed description of every single button, checkbox etc. The “blueprints” for the user interface are drawings that show the expected real user interface with fonts, sizes, colors and even distances between elements in pixels.</p>

<p>In this organization they create a Word document for each user story which contains a narrative based on the other documents that were created, discussed, and approved before followed by a drawing of the screen based on the “blueprints” from the user experience group. At the end of the “story document” the business analyst puts the acceptance criteria written in Gherkin format.</p>

<p>A tester started to work on a Cucumber feature for a story that was about getting into the application, choose between two different types of business and then start the process of gathering more information that the application under development will require. When I joined him for a pairing session the scenario he had written so far looked like the following example:</p>

<p>[sourcecode language=”text”]
Scenario: Start new business
	Given the application has been started
	And the radio button for new business is selected
	And the effective date has been set to "02/15/2011"
	And the state is "KY"
	When the user clicks the start button
	Then the framework for the new business screen appears
[/sourcecode]</p>

<p>A Cucumber scenario like the one shown here is basically a scripted version of record and play back used in more traditional testing tools. The steps prescribe precisely what a user would do using mouse and keyboard.</p>

<p>The last line of the example reveals another interesting detail too. As the team had just started to build this application, there is not much there yet. So here and there they just want to build a framework for something which in this case is basically an empty window or in some cases a window with a few text labels in it.</p>

<p>Here is what I suggested:</p>

<p>[sourcecode language=”text”]
Scenario: Start new business
	Given "Joe Kentucky" is using the application
	And the quote is for "Sam Smith" who lives in "Kentucky"
	And "Sam Smith" has not been a customer before
	And the insurance policy should provide coverage by "02/15/2011"
	When "Joe Kentucky" starts a new quote
	Then the framework for the new business screen appears
[/sourcecode]</p>

<p>So what’s the difference?</p>

<p>By using personas in my steps the story told is much richer. With a few key personas defined the whole team can talk about what these people do and what they expect and when referring to them by name all that background knowledge is always present in the minds of the team members. There is a technical advantage as well. The name of a persona can be used as a key into data structures for <a href="http://www.cheezyworld.com/2010/11/21/ui-tests-default-dat/">default data</a>. So by referring to “Sam Smith” I automatically get access to eg. that person’s address or whatever the application needs. I don’t have to write all these details in each and every scenario which would make my scenarios much more brittle and hard to read.</p>

<p>Then the second scenario clearly tells what this is about from the perspective of someone who is preparing a quote for an insurance product. No end user wants to click buttons. They use a computer and the software it runs on it for a purpose which is not playing with the UI.</p>

<p>As the whole point of Acceptance Test Driven Development is that I am able to discuss scenarios with a real end user - my customer - I have to speak their language. If I talk about something else every time we meet, they will never trust my ability to deliver a solution. Some may simply shop elsewhere while others - in a larger organization - will happily support any effort towards a heavy process where seemingly clearly written step-by-step instructions get handed over to these programmers who don’t understand the business. “Just code it” …</p>

<p>But still, a tester would now say, when running the Cucumber scenario it is necessary to click on the radio button, populate a date field with the effective date and click that start button.</p>

<p>That can be done quite easily.</p>

<p>[sourcecode language=”ruby”]
Given /^"([^\"]*)" is using the application$/ do |persona|
  @current_agent = DefaultDataHelper::load(persona)
  @pid = LaunchHelper::launchApp
end</p>

<p>When /^the quote is for "([^\"]<em>)" who lives in "([^\"]</em>)"$/ do |persona, state|
  persona_default_data = DefaultDataHelper::load(persona)
  persona_default_data[:residency_state].should == state</p>

<p>@current_customer  = { :customer_name =&gt; persona }.merge persona_default_data
end</p>

<p>When /^"([^\"]*)" has not been a customer before$/ do |persona|
  @current_customer[:new_customer] = true
end</p>

<p>When /^the insurance policy should provide coverage by "([^\"]*)"$/ do |coverage_start_date|
  @current_customer[:coverage_start_date] = coverage_start_date
end</p>

<p>When /^"([^\"]*)" starts a new quote$/ do |persona|
  @current_agent[:agent_name].should == persona</p>

<p>screen = PolicySalesScreen.new
  screen.start_quote @current_agent, @current_customer
end
[/sourcecode]</p>

<p>Run the feature and you will get:</p>

<p>[sourcecode language=”text”]
In PolicySalesScreen.start_quote we will use automation to control the UI</p>

<p>You can implement step definitions for undefined steps with these snippets:
Then /^the framework for the new business screen appears$/ do
  pending # express the regexp above with the code you wish you had
end
1 scenario (1 undefined)
6 steps (1 undefined, 5 passed)
[/sourcecode]</p>

<p>So now you have a failing test and can start development. The programmer working on the story will know the context and intent and hence write better code that will reveal the same intent as the story does.</p>

					<table class="postfooter" style="width: 100%">
					<tr>
						<td style="text-align: left; width: 33%"><a href="/2011/01/21/acceptance-test-driven-development-for-windows.html">Previous</a></td>
						<td style="text-align: center; width: 33%">18 Feb 2011</td>
						<td style="text-align: right; width: 33%"><a href="/2011/02/26/acceptance-test-driven-development-brings-teams-together.html">Next</a></td>
					</tr>
					</table>
					<p>This article has been posted to social media sites. There might be comments. Just follow the links:</p>
					<div>
						<a class="social-blogging" service="twitter" href="https://twitter.com/snscaimito"><img src="/img/Furry-Cushion-Twitter_48.png" /></a>
						<a class="social-blogging" service="activityPub" rel="me" href="https://techhub.social/@snscaimito"><img src="/img/mastodon.svg" width="48" /></a>
					</div>
				</div>
			</div>
			<div class="span3">
        <div class="sidebar">
        	<p class="section">About this article</p>
          <p>Published: February 18, 2011</p>
					<p>Posted in:
						
							<a class="categoryLink" href="/category/software_development.html">software_development</a>
						
							<a class="categoryLink" href="/category/atdd.html">atdd</a>
						
							<a class="categoryLink" href="/category/quality.html">quality</a>
						
					</p>
          
        </div>
				<div class="sidebar">
	<p class="section">About me</p>
	<p>Hello! My name is <a href="/">Stephan Schwab</a>.</p>
			<a href="/"><img src="http://www.gravatar.com/avatar/663d11426b0a187ddac59f8c17ce61b4?s=90" class="align-left"/></a>
		<p>As International Software Development Coach and Consultant I help CEOs and Department Leaders to <strong>improve</strong> <strong>value creation</strong> and <strong>cohesion</strong> within their organization. The outcome will be higher <strong>quality</strong>, <strong>customer delight</strong> and <strong>more revenue</strong>.</p> 
		
		<p>Learn about <a href="/resume/">my professional experience</a> since 1986.</p>
    <span style="clear:both; float:none"/>

	<p class="section">Professional Services</p>
	<p>I'm fluent in these languages:</p>
	<p align="center">
		<a href="/category/en.html"><img src="/img/language-flags/32x32/flag_rotate-02.png"></a>
		<a href="/category/de.html"><img src="/img/language-flags/32x32/flag_rotate-03.png"></a>
		<a href="/category/es.html"><img src="/img/language-flags/32x32/flag_rotate-12.png"></a>
	</p>
	<p align="center">
		<small>
			<a href="/category/en.html">English</a>
			<a href="/category/de.html">German</a>
			<a href="/category/es.html">Spanish</a>
		</small>
	</p>
	<div class="no-print-sidebar">
		<p>Scrum Pair-Coaching to develop technical competence:</p>
		<p align="center">Details in <a href="/en-pair-coaching-scrummaster.html">English</a>, <a
				href="/de-pair-coaching-scrummaster.html">Deutsch</a></p>

		<p><strong>Resources for new clients</strong>:</p>
		<p align="center"><a href="/resources/de-new-client.html">Deutsch</a></p>
	</div>

	<div class="no-print-sidebar">
		<p class="section noprint">Search</p>
		<form method="get" action="http://www.google.com/search">
			<p align="center"><input type="text" name="q" maxlength="255" value="" style="width: 180px" /></br>
				<input type="submit" value="Google Search" class="btn btn-primary btn-mini" />
			</p>
			<input type="hidden" name="sitesearch" value="http://www.stephan-schwab.com" />
		</form>

		<p class="section">Special&nbsp;Content</p>
		<ul class="special-content">
			<li><a href="/atdd/">Acceptance Test-Driven Development</a></li>
			<li><a href="/software-design/">Software Design</a></li>
			<li><a href="/sddm.html">Software Development Decision Making</a></li>
		</ul>
		<ul class="special-content">
			<li><a href="/coaching-future-masters.html">Coaching future masters</a></li>
		</ul>
		<ul class="special-content">
			<li><a href="/farmstead.html">Developing a farmstead in Andalucia, Spain</a></li>
			<li><a href="/house/">Building a house, Spain</a></li>
			<li><a href="/airtravel/">Business travel with light aircraft</a></li>
			<li><a href="/horses/">Horses</a></li>
			<li><a href="/panama-farm.html">Rainforest Farm, Panama</a></li>
			<li><a href="/galleries/">Photo Galleries</a></li>
		</ul>
		<ul class="special-content">
			<li><a href="/reading-list.html">My reading list</a></li>
		</ul>

		<p class="section">Highlights of the Year</p>
		<ul class="special-content">
			
			<li><a href="/2016/12/27/highlights-of-2016.html">2016</a></li>
			
			<li><a href="/2015/12/31/highlights-2015.html">2015</a></li>
			
			<li><a href="/2014/12/31/highlights-2014.html">2014</a></li>
			
			<li><a href="/2013/12/31/hightlights-2013.html">2013</a></li>
			
			<li><a href="/2012/12/31/highlights-2012.html">2012</a></li>
			
			<li><a href="/2011/12/31/highlights-2011.html">2011</a></li>
			
			<li><a href="/2010/12/31/highlights-2010.html">2010</a></li>
			
			<li><a href="/2009/12/31/highlights-2009.html">2009</a></li>
			
			<li><a href="/2008/12/31/highlights-2008.html">2008</a></li>
			
			<li><a href="/2007/12/31/highlights-2007.html">2007</a></li>
			
			<li><a href="/2006/12/31/highlights-2006.html">2006</a></li>
			
		</ul>

		<p class="section">Living on planet Earth</p>
		<ul class="special-content">
			<li><a href="/dominican-republic.html">Dominican Republic</a></li>
			<li><a href="/china.html">China</a></li>
			<li><a href="/germany.html">Germany</a></li>
			<li><a href="/panama.html">Panama</a></li>
			<li><a href="/spain.html">Spain</a></li>
			<li><a href="/usa.html">USA</a></li>
		</ul>

		<p class="section">Open Source Projects</p>
		<ul class="special-content">
			<li><a href="/ale-news.html">Development of ALE News</a></li>
			<li><a href="https://github.com/snscaimito/RAutomation">RAutomation</a></li>
			<li><a href="/open-source.html">Other contributions to Open Source</a></li>
		</ul>

		<p class="section">Stay in touch</p>
		<p align="center">
			<a href="/rss.xml"><img src="/img/Furry-Cushion-RSS_48.png" /></a>
			<a href="https://twitter.com/snscaimito"><img src="/img/Furry-Cushion-Twitter_48.png" /></a>
			<a href="http://www.linkedin.com/in/stephanschwab"><img src="/img/Furry-Cushion-LinkedIn_48.png" /></a>
		</p>
		<p align="center">
			<a rel="me" href="https://techhub.social/@snscaimito"><img src="/img/mastodon.svg" width="48" /></a>
			<a href="https://bsky.app/profile/snscaimito.bsky.social"><img src="/img/Bluesky_butterfly-logo.svg"
					width="65" /></a>
			<a href="https://www.tiktok.com/@snscaimito"><img src="/img/tiktok-icon-white-1-logo-svgrepo-com.svg"
					width="48" /></a>
		</p>
		<p align="center">
			<a href="mailto:sns@caimito.net?subject=From%20stephan-schwab.com">sns@caimito.net</a>
		</p>

		<p class=" section">My Books
		</p>
		<p align="center"><a href="https://leanpub.com/activitycentereddesign"><img
					src="/img/smarter-software-with-activity-centered-design.jpg" /></a></p>
		<p align="center"><a href="https://leanpub.com/essays-on-software-development-2012"><img
					src="/img/essays-on-software-development-2012.png" /></a></p>

		<p class="section">Everything</p>
		<p>See a listing of <a href="/all-posts.html">all posts</a> on this site.</p>
	</div>
</div>
			</div>
		</div>
	</div>
		<script src="//use.typekit.net/npx1yoc.js"></script>
	<script>try{Typekit.load();}catch(e){}</script>
	
	<script type="text/javascript" src="/js/bootstrap.min.js"></script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-35257032-1', 'auto');
	  ga('require', 'displayfeatures');
	  ga('send', 'pageview');

	</script>
	<script type="text/javascript"> 
		jQuery(document).ready(function(){ 
			jQuery("#gallery").unitegallery(); 
		}); 
	</script>
	
	<script>
		$(document).ready(function() {
			$('.social-blogging').each(function() {
				const service = $(this).attr('service');
				const url = `/api/posted-on/${service}?article=${window.location.pathname}`;

				fetch(url)
					.then(response => response.json())
					.then(data => {
						console.log(data)
						$(this).attr('href', data.postUrl)
					})
					.catch(error => console.error('Error:', error));
			})
		})
	</script>

</body>
</html>
